"use strict";(self.webpackChunkd2sv_sdk_builder=self.webpackChunkd2sv_sdk_builder||[]).push([[3866],{3905:(t,n,e)=>{e.d(n,{Zo:()=>d,kt:()=>k});var l=e(7294);function o(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function i(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,l)}return e}function a(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?i(Object(e),!0).forEach((function(n){o(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function u(t,n){if(null==t)return{};var e,l,o=function(t,n){if(null==t)return{};var e,l,o={},i=Object.keys(t);for(l=0;l<i.length;l++)e=i[l],n.indexOf(e)>=0||(o[e]=t[e]);return o}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(l=0;l<i.length;l++)e=i[l],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(o[e]=t[e])}return o}var r=l.createContext({}),s=function(t){var n=l.useContext(r),e=n;return t&&(e="function"==typeof t?t(n):a(a({},n),t)),e},d=function(t){var n=s(t.components);return l.createElement(r.Provider,{value:n},t.children)},g="mdxType",c={inlineCode:"code",wrapper:function(t){var n=t.children;return l.createElement(l.Fragment,{},n)}},p=l.forwardRef((function(t,n){var e=t.components,o=t.mdxType,i=t.originalType,r=t.parentName,d=u(t,["components","mdxType","originalType","parentName"]),g=s(e),p=o,k=g["".concat(r,".").concat(p)]||g[p]||c[p]||i;return e?l.createElement(k,a(a({ref:n},d),{},{components:e})):l.createElement(k,a({ref:n},d))}));function k(t,n){var e=arguments,o=n&&n.mdxType;if("string"==typeof t||o){var i=e.length,a=new Array(i);a[0]=p;var u={};for(var r in n)hasOwnProperty.call(n,r)&&(u[r]=n[r]);u.originalType=t,u[g]="string"==typeof t?t:o,a[1]=u;for(var s=2;s<i;s++)a[s]=e[s];return l.createElement.apply(null,a)}return l.createElement.apply(null,e)}p.displayName="MDXCreateElement"},5357:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>u,toc:()=>s});var l=e(7462),o=(e(7294),e(3905));const i={},a=void 0,u={unversionedId:"api/d2/utils/oauth.login.dialog",id:"api/d2/utils/oauth.login.dialog",title:"oauth.login.dialog",description:"OAuthLoginDialog : d2/sdk/utils/oauth.login.dialog",source:"@site/articles/api/d2/utils/oauth.login.dialog.md",sourceDirName:"api/d2/utils",slug:"/api/d2/utils/oauth.login.dialog",permalink:"/api/d2/utils/oauth.login.dialog",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"api",previous:{title:"tiles",permalink:"/api/d2/utils/landingpage/tiles"},next:{title:"app.scope.perspectives",permalink:"/api/d2/utils/perspectives/app.scope.perspectives"}},r={},s=[{value:"OAuthLoginDialog : <code>d2/sdk/utils/oauth.login.dialog</code>",id:"oauthlogindialog--d2sdkutilsoauthlogindialog",level:2},{value:"OAuthLoginDialog \u23cf",id:"oauthlogindialog-",level:3},{value:"new OAuthLoginDialog(options)",id:"new-oauthlogindialogoptions",level:4},{value:"oAuthLoginDialog.login() \u21d2 <code>jQyery.Promise</code>",id:"oauthlogindialoglogin--jqyerypromise",level:4},{value:"OAuthLoginDialog~OAuthLoginSuccessCallback : <code>function</code>",id:"oauthlogindialogoauthloginsuccesscallback--function",level:4}],d={toc:s},g="wrapper";function c(t){let{components:n,...e}=t;return(0,o.kt)(g,(0,l.Z)({},d,e,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("a",{name:"module_OAuthLoginDialog"}),(0,o.kt)("h2",{id:"oauthlogindialog--d2sdkutilsoauthlogindialog"},"OAuthLoginDialog : ",(0,o.kt)("code",null,"d2/sdk/utils/oauth.login.dialog")),(0,o.kt)("p",null,"Authenticate with an external IDP using OAuth2 and acquire access token. Requires popup to be enabled in browser."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Extends"),": ",(0,o.kt)("code",null,"Object"),(0,o.kt)("br",{parentName:"p"}),"\n",(0,o.kt)("strong",{parentName:"p"},"Example")," ",(0,o.kt)("em",{parentName:"p"},"(A sample authentication with OTDS could look like)"),"  "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"define([\n   'd2/sdk/utils/contexts/context.utils',\n   'd2/sdk/utils/contexts/factories/connector'\n   'd2/sdk/utils/oauth.login.dialog'\n], function(contextUtil, ConnectorFactory, OAuthLoginDialog){\n   'use strict';\n\n   var dlg = new OAuthLoginDialog({\n     connector: contextUtil.getPerspectiveContext().getObject(ConnectorFactory),\n     url: 'https://<OTDS_SERVER_IP>:8443/otdsws/oauth2/auth',\n     clientId: 'sample_system',\n     strings: {\n       title: 'Sign in to Sample System', //could be localized using i18n\n       authError: 'Authentication failed for Sample System' //could be localized using i18n\n     }\n   });\n\n   dlg\n     .login()\n     .then(function(accessToken, expiresIn){\n       console.log('Acquired token:' + accessToken + ' that is valid for ' + expiresIn + ' ms.'); //Even though console logging sensitive data is a bad idea, but it's always handy for a code snippet :-)\n     })\n     .catch(function(){\n       console.log('Auth failed');\n     });\n});\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#module_OAuthLoginDialog"},"OAuthLoginDialog")," : ",(0,o.kt)("code",null,"d2/sdk/utils/oauth.login.dialog"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#exp_module_OAuthLoginDialog--OAuthLoginDialog"},"OAuthLoginDialog")," \u23cf",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#new_module_OAuthLoginDialog--OAuthLoginDialog_new"},"new OAuthLoginDialog(options)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("em",{parentName:"li"},"instance"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#module_OAuthLoginDialog--OAuthLoginDialog+login"},".login()")," \u21d2 ",(0,o.kt)("code",null,"jQyery.Promise")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("em",{parentName:"li"},"inner"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#module_OAuthLoginDialog--OAuthLoginDialog..OAuthLoginSuccessCallback"},"~OAuthLoginSuccessCallback")," : ",(0,o.kt)("code",null,"function"))))))))),(0,o.kt)("a",{name:"exp_module_OAuthLoginDialog--OAuthLoginDialog"}),(0,o.kt)("h3",{id:"oauthlogindialog-"},"OAuthLoginDialog \u23cf"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Kind"),": Exported class  "),(0,o.kt)("a",{name:"new_module_OAuthLoginDialog--OAuthLoginDialog_new"}),(0,o.kt)("h4",{id:"new-oauthlogindialogoptions"},"new OAuthLoginDialog(options)"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Throws"),":"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Error if any of ",(0,o.kt)("inlineCode",{parentName:"li"},"options.connector")," & ",(0,o.kt)("inlineCode",{parentName:"li"},"options.url")," is missing.")),(0,o.kt)("table",null,(0,o.kt)("thead",null,(0,o.kt)("tr",null,(0,o.kt)("th",null,"Param"),(0,o.kt)("th",null,"Type"),(0,o.kt)("th",null,"Description"))),(0,o.kt)("tbody",null,(0,o.kt)("tr",null,(0,o.kt)("td",null,"options"),(0,o.kt)("td",null,(0,o.kt)("code",null,"object")),(0,o.kt)("td",null,(0,o.kt)("p",null,"Construction options holder"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"options.connector"),(0,o.kt)("td",null,(0,o.kt)("code",null,"Connector")),(0,o.kt)("td",null,(0,o.kt)("p",null,"AJAX transport. See ",(0,o.kt)("a",{href:"./contexts/factories/connector"},"Connector"),"."))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"options.url"),(0,o.kt)("td",null,(0,o.kt)("code",null,"string")),(0,o.kt)("td",null,(0,o.kt)("p",null,"Base URL of IDP"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"options.clientId"),(0,o.kt)("td",null,(0,o.kt)("code",null,"string")),(0,o.kt)("td",null,(0,o.kt)("p",null,"Client ID of the system for which token is being requested."))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"[options.strings]"),(0,o.kt)("td",null,(0,o.kt)("code",null,"Object.<string, string>")),(0,o.kt)("td",null,(0,o.kt)("p",null,"To control different displayable labels associated with the dialog."))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"[options.strings.title]"),(0,o.kt)("td",null,(0,o.kt)("code",null,"string")),(0,o.kt)("td",null,(0,o.kt)("p",null,"Login dialog's title."))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"[options.strings.message]"),(0,o.kt)("td",null,(0,o.kt)("code",null,"string")),(0,o.kt)("td",null,(0,o.kt)("p",null,"Login dialog's message."))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"[options.strings.cancelBtn]"),(0,o.kt)("td",null,(0,o.kt)("code",null,"string")),(0,o.kt)("td",null,(0,o.kt)("p",null,"Login dialog's Cancel button label."))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"[options.strings.authError]"),(0,o.kt)("td",null,(0,o.kt)("code",null,"string")),(0,o.kt)("td",null,(0,o.kt)("p",null,"Message to be shown if authentication fails."))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"[options.strings.popupTitle]"),(0,o.kt)("td",null,(0,o.kt)("code",null,"string")),(0,o.kt)("td",null,(0,o.kt)("p",null,"Alert dialog's title if popup is diabled."))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"[options.strings.popupWarning]"),(0,o.kt)("td",null,(0,o.kt)("code",null,"string")),(0,o.kt)("td",null,(0,o.kt)("p",null,"Alert dialog's message if popup is diabled."))),"  ")),(0,o.kt)("a",{name:"module_OAuthLoginDialog--OAuthLoginDialog+login"}),(0,o.kt)("h4",{id:"oauthlogindialoglogin--jqyerypromise"},"oAuthLoginDialog.login() \u21d2 ",(0,o.kt)("code",null,"jQyery.Promise")),(0,o.kt)("p",null,"Perform login to the external IDP. It checks existence of a valid access token first, if not found then login screen is shown."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,o.kt)("a",{parentName:"p",href:"#exp_module_OAuthLoginDialog--OAuthLoginDialog"},(0,o.kt)("code",null,"OAuthLoginDialog")),(0,o.kt)("br",{parentName:"p"}),"\n",(0,o.kt)("strong",{parentName:"p"},"Returns"),": ",(0,o.kt)("code",null,"jQyery.Promise")," - resolves and invokes ",(0,o.kt)("inlineCode",{parentName:"p"},"OAuthLoginSuccessCallback")," on successful login, rejects otherwise  "),(0,o.kt)("a",{name:"module_OAuthLoginDialog--OAuthLoginDialog..OAuthLoginSuccessCallback"}),(0,o.kt)("h4",{id:"oauthlogindialogoauthloginsuccesscallback--function"},"OAuthLoginDialog~OAuthLoginSuccessCallback : ",(0,o.kt)("code",null,"function")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Kind"),": inner typedef of ",(0,o.kt)("a",{parentName:"p",href:"#exp_module_OAuthLoginDialog--OAuthLoginDialog"},(0,o.kt)("code",null,"OAuthLoginDialog")),"  "),(0,o.kt)("table",null,(0,o.kt)("thead",null,(0,o.kt)("tr",null,(0,o.kt)("th",null,"Param"),(0,o.kt)("th",null,"Type"),(0,o.kt)("th",null,"Description"))),(0,o.kt)("tbody",null,(0,o.kt)("tr",null,(0,o.kt)("td",null,"accessToken"),(0,o.kt)("td",null,(0,o.kt)("code",null,"string")),(0,o.kt)("td",null,(0,o.kt)("p",null,"The access token"))),(0,o.kt)("tr",null,(0,o.kt)("td",null,"expiresIn"),(0,o.kt)("td",null,(0,o.kt)("code",null,"number")),(0,o.kt)("td",null,(0,o.kt)("p",null,"Token expiration time in milliseconds."))),"  ")))}c.isMDXComponent=!0}}]);