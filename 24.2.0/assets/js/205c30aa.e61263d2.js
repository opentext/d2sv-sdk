"use strict";(self.webpackChunkd2sv_sdk_builder=self.webpackChunkd2sv_sdk_builder||[]).push([[6942],{5680:(n,e,l)=>{l.d(e,{xA:()=>s,yg:()=>p});var t=l(6540);function o(n,e,l){return e in n?Object.defineProperty(n,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[e]=l,n}function i(n,e){var l=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),l.push.apply(l,t)}return l}function g(n){for(var e=1;e<arguments.length;e++){var l=null!=arguments[e]?arguments[e]:{};e%2?i(Object(l),!0).forEach((function(e){o(n,e,l[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(l)):i(Object(l)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(l,e))}))}return n}function a(n,e){if(null==n)return{};var l,t,o=function(n,e){if(null==n)return{};var l,t,o={},i=Object.keys(n);for(t=0;t<i.length;t++)l=i[t],e.indexOf(l)>=0||(o[l]=n[l]);return o}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(t=0;t<i.length;t++)l=i[t],e.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(n,l)&&(o[l]=n[l])}return o}var u=t.createContext({}),r=function(n){var e=t.useContext(u),l=e;return n&&(l="function"==typeof n?n(e):g(g({},e),n)),l},s=function(n){var e=r(n.components);return t.createElement(u.Provider,{value:e},n.children)},d="mdxType",c={inlineCode:"code",wrapper:function(n){var e=n.children;return t.createElement(t.Fragment,{},e)}},y=t.forwardRef((function(n,e){var l=n.components,o=n.mdxType,i=n.originalType,u=n.parentName,s=a(n,["components","mdxType","originalType","parentName"]),d=r(l),y=o,p=d["".concat(u,".").concat(y)]||d[y]||c[y]||i;return l?t.createElement(p,g(g({ref:e},s),{},{components:l})):t.createElement(p,g({ref:e},s))}));function p(n,e){var l=arguments,o=e&&e.mdxType;if("string"==typeof n||o){var i=l.length,g=new Array(i);g[0]=y;var a={};for(var u in e)hasOwnProperty.call(e,u)&&(a[u]=e[u]);a.originalType=n,a[d]="string"==typeof n?n:o,g[1]=a;for(var r=2;r<i;r++)g[r]=l[r];return t.createElement.apply(null,g)}return t.createElement.apply(null,l)}y.displayName="MDXCreateElement"},4896:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>u,contentTitle:()=>g,default:()=>c,frontMatter:()=>i,metadata:()=>a,toc:()=>r});var t=l(8168),o=(l(6540),l(5680));const i={},g=void 0,a={unversionedId:"api/d2/utils/oauth.login.dialog",id:"api/d2/utils/oauth.login.dialog",title:"oauth.login.dialog",description:"OAuthLoginDialog : d2/sdk/utils/oauth.login.dialog",source:"@site/articles/api/d2/utils/oauth.login.dialog.md",sourceDirName:"api/d2/utils",slug:"/api/d2/utils/oauth.login.dialog",permalink:"/d2sv-sdk/24.2.0/api/d2/utils/oauth.login.dialog",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"api",previous:{title:"tiles",permalink:"/d2sv-sdk/24.2.0/api/d2/utils/landingpage/tiles"},next:{title:"app.scope.perspectives",permalink:"/d2sv-sdk/24.2.0/api/d2/utils/perspectives/app.scope.perspectives"}},u={},r=[{value:"OAuthLoginDialog : <code>d2/sdk/utils/oauth.login.dialog</code>",id:"oauthlogindialog--d2sdkutilsoauthlogindialog",level:2},{value:"OAuthLoginDialog \u23cf",id:"oauthlogindialog-",level:3},{value:"new OAuthLoginDialog(options)",id:"new-oauthlogindialogoptions",level:4},{value:"oAuthLoginDialog.login() \u21d2 <code>jQyery.Promise</code>",id:"oauthlogindialoglogin--jqyerypromise",level:4},{value:"OAuthLoginDialog~OAuthLoginSuccessCallback : <code>function</code>",id:"oauthlogindialogoauthloginsuccesscallback--function",level:4}],s={toc:r},d="wrapper";function c(n){let{components:e,...l}=n;return(0,o.yg)(d,(0,t.A)({},s,l,{components:e,mdxType:"MDXLayout"}),(0,o.yg)("a",{name:"module_OAuthLoginDialog"}),(0,o.yg)("h2",{id:"oauthlogindialog--d2sdkutilsoauthlogindialog"},"OAuthLoginDialog : ",(0,o.yg)("code",null,"d2/sdk/utils/oauth.login.dialog")),(0,o.yg)("p",null,"Authenticate with an external IDP using OAuth2 and acquire access token. Requires popup to be enabled in browser."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Extends"),": ",(0,o.yg)("code",null,"Object"),(0,o.yg)("br",{parentName:"p"}),"\n",(0,o.yg)("strong",{parentName:"p"},"Example")," ",(0,o.yg)("em",{parentName:"p"},"(A sample authentication with OTDS could look like)"),"  "),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"define([\n   'd2/sdk/utils/contexts/context.utils',\n   'd2/sdk/utils/contexts/factories/connector'\n   'd2/sdk/utils/oauth.login.dialog'\n], function(contextUtil, ConnectorFactory, OAuthLoginDialog){\n   'use strict';\n\n   var dlg = new OAuthLoginDialog({\n     connector: contextUtil.getPerspectiveContext().getObject(ConnectorFactory),\n     url: 'https://<OTDS_SERVER_IP>:8443/otdsws/oauth2/auth',\n     clientId: 'sample_system',\n     strings: {\n       title: 'Sign in to Sample System', //could be localized using i18n\n       authError: 'Authentication failed for Sample System' //could be localized using i18n\n     }\n   });\n\n   dlg\n     .login()\n     .then(function(accessToken, expiresIn){\n       console.log('Acquired token:' + accessToken + ' that is valid for ' + expiresIn + ' ms.'); //Even though console logging sensitive data is a bad idea, but it's always handy for a code snippet :-)\n     })\n     .catch(function(){\n       console.log('Auth failed');\n     });\n});\n")),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"#module_OAuthLoginDialog"},"OAuthLoginDialog")," : ",(0,o.yg)("code",null,"d2/sdk/utils/oauth.login.dialog"),(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"#exp_module_OAuthLoginDialog--OAuthLoginDialog"},"OAuthLoginDialog")," \u23cf",(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"#new_module_OAuthLoginDialog--OAuthLoginDialog_new"},"new OAuthLoginDialog(options)")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("em",{parentName:"li"},"instance"),(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"#module_OAuthLoginDialog--OAuthLoginDialog+login"},".login()")," \u21d2 ",(0,o.yg)("code",null,"jQyery.Promise")))),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("em",{parentName:"li"},"inner"),(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"#module_OAuthLoginDialog--OAuthLoginDialog..OAuthLoginSuccessCallback"},"~OAuthLoginSuccessCallback")," : ",(0,o.yg)("code",null,"function"))))))))),(0,o.yg)("a",{name:"exp_module_OAuthLoginDialog--OAuthLoginDialog"}),(0,o.yg)("h3",{id:"oauthlogindialog-"},"OAuthLoginDialog \u23cf"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Kind"),": Exported class  "),(0,o.yg)("a",{name:"new_module_OAuthLoginDialog--OAuthLoginDialog_new"}),(0,o.yg)("h4",{id:"new-oauthlogindialogoptions"},"new OAuthLoginDialog(options)"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Throws"),":"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Error if any of ",(0,o.yg)("inlineCode",{parentName:"li"},"options.connector")," & ",(0,o.yg)("inlineCode",{parentName:"li"},"options.url")," is missing.")),(0,o.yg)("table",null,(0,o.yg)("thead",null,(0,o.yg)("tr",null,(0,o.yg)("th",null,"Param"),(0,o.yg)("th",null,"Type"),(0,o.yg)("th",null,"Description"))),(0,o.yg)("tbody",null,(0,o.yg)("tr",null,(0,o.yg)("td",null,"options"),(0,o.yg)("td",null,(0,o.yg)("code",null,"object")),(0,o.yg)("td",null,(0,o.yg)("p",null,"Construction options holder"))),(0,o.yg)("tr",null,(0,o.yg)("td",null,"options.connector"),(0,o.yg)("td",null,(0,o.yg)("code",null,"Connector")),(0,o.yg)("td",null,(0,o.yg)("p",null,"AJAX transport. See ",(0,o.yg)("a",{href:"./contexts/factories/connector"},"Connector"),"."))),(0,o.yg)("tr",null,(0,o.yg)("td",null,"options.url"),(0,o.yg)("td",null,(0,o.yg)("code",null,"string")),(0,o.yg)("td",null,(0,o.yg)("p",null,"Base URL of IDP"))),(0,o.yg)("tr",null,(0,o.yg)("td",null,"options.clientId"),(0,o.yg)("td",null,(0,o.yg)("code",null,"string")),(0,o.yg)("td",null,(0,o.yg)("p",null,"Client ID of the system for which token is being requested."))),(0,o.yg)("tr",null,(0,o.yg)("td",null,"[options.strings]"),(0,o.yg)("td",null,(0,o.yg)("code",null,"Object.<string, string>")),(0,o.yg)("td",null,(0,o.yg)("p",null,"To control different displayable labels associated with the dialog."))),(0,o.yg)("tr",null,(0,o.yg)("td",null,"[options.strings.title]"),(0,o.yg)("td",null,(0,o.yg)("code",null,"string")),(0,o.yg)("td",null,(0,o.yg)("p",null,"Login dialog's title."))),(0,o.yg)("tr",null,(0,o.yg)("td",null,"[options.strings.message]"),(0,o.yg)("td",null,(0,o.yg)("code",null,"string")),(0,o.yg)("td",null,(0,o.yg)("p",null,"Login dialog's message."))),(0,o.yg)("tr",null,(0,o.yg)("td",null,"[options.strings.cancelBtn]"),(0,o.yg)("td",null,(0,o.yg)("code",null,"string")),(0,o.yg)("td",null,(0,o.yg)("p",null,"Login dialog's Cancel button label."))),(0,o.yg)("tr",null,(0,o.yg)("td",null,"[options.strings.authError]"),(0,o.yg)("td",null,(0,o.yg)("code",null,"string")),(0,o.yg)("td",null,(0,o.yg)("p",null,"Message to be shown if authentication fails."))),(0,o.yg)("tr",null,(0,o.yg)("td",null,"[options.strings.popupTitle]"),(0,o.yg)("td",null,(0,o.yg)("code",null,"string")),(0,o.yg)("td",null,(0,o.yg)("p",null,"Alert dialog's title if popup is diabled."))),(0,o.yg)("tr",null,(0,o.yg)("td",null,"[options.strings.popupWarning]"),(0,o.yg)("td",null,(0,o.yg)("code",null,"string")),(0,o.yg)("td",null,(0,o.yg)("p",null,"Alert dialog's message if popup is diabled."))),"  ")),(0,o.yg)("a",{name:"module_OAuthLoginDialog--OAuthLoginDialog+login"}),(0,o.yg)("h4",{id:"oauthlogindialoglogin--jqyerypromise"},"oAuthLoginDialog.login() \u21d2 ",(0,o.yg)("code",null,"jQyery.Promise")),(0,o.yg)("p",null,"Perform login to the external IDP. It checks existence of a valid access token first, if not found then login screen is shown."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,o.yg)("a",{parentName:"p",href:"#exp_module_OAuthLoginDialog--OAuthLoginDialog"},(0,o.yg)("code",null,"OAuthLoginDialog")),(0,o.yg)("br",{parentName:"p"}),"\n",(0,o.yg)("strong",{parentName:"p"},"Returns"),": ",(0,o.yg)("code",null,"jQyery.Promise")," - resolves and invokes ",(0,o.yg)("inlineCode",{parentName:"p"},"OAuthLoginSuccessCallback")," on successful login, rejects otherwise  "),(0,o.yg)("a",{name:"module_OAuthLoginDialog--OAuthLoginDialog..OAuthLoginSuccessCallback"}),(0,o.yg)("h4",{id:"oauthlogindialogoauthloginsuccesscallback--function"},"OAuthLoginDialog~OAuthLoginSuccessCallback : ",(0,o.yg)("code",null,"function")),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Kind"),": inner typedef of ",(0,o.yg)("a",{parentName:"p",href:"#exp_module_OAuthLoginDialog--OAuthLoginDialog"},(0,o.yg)("code",null,"OAuthLoginDialog")),"  "),(0,o.yg)("table",null,(0,o.yg)("thead",null,(0,o.yg)("tr",null,(0,o.yg)("th",null,"Param"),(0,o.yg)("th",null,"Type"),(0,o.yg)("th",null,"Description"))),(0,o.yg)("tbody",null,(0,o.yg)("tr",null,(0,o.yg)("td",null,"accessToken"),(0,o.yg)("td",null,(0,o.yg)("code",null,"string")),(0,o.yg)("td",null,(0,o.yg)("p",null,"The access token"))),(0,o.yg)("tr",null,(0,o.yg)("td",null,"expiresIn"),(0,o.yg)("td",null,(0,o.yg)("code",null,"number")),(0,o.yg)("td",null,(0,o.yg)("p",null,"Token expiration time in milliseconds."))),"  ")))}c.isMDXComponent=!0}}]);